{% extends 'base.html.twig' %}

{% block title %}
	Educateur | EliteSports
{% endblock %}

{% block page_content %}
	<!-- Begin page content -->
	<div class="content">
		<div class="container-fluid">

			<div class="row">
				<div class="col-12">
					<div class="page-title-box">
						<div class="page-title-right"></div>
						<h4 class="page-title">Educateurs</h4>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-12">
					<div class="card">
						<div class="card-body">
							<h4 class="header-title">Liste Educateurs</h4>
							<hr>
							<table id="educateur_datatable" class="table table-striped dt-responsive nowrap w-100"></table>
							<!-- end tab-content-->
						</div>
						<!-- end card-body -->
					</div>
					<!-- end card -->
				</div>
				<!-- end col -->
			</div>

		</div>
	</div>


	 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
	 <script src="https://cdn.datatables.net/v/bs5/dt-1.13.6/datatables.min.js"></script>
	 <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
	 <script>
					        $(document).ready(function() {
					            // recuperer la liste des categorie au chargement de la page
					            fetchAllEducateur();
					        });
					
					        var educateurDataTable;
					
					        // Fonction pour récupérer la liste des licencié
					        function fetchAllEducateur() {
					    $.ajax({
					        url: '{{ path('app_educateur_getAll') }}',
					        type: 'GET',
					        dataType: 'json',
					        success: function(data) {
					            if (data.success) {
					
					                if ($.fn.DataTable.isDataTable('#educateur_datatable')) {
					                    educateurDataTable.destroy();
					                }
					
					                educateurDataTable = $('#educateur_datatable').DataTable({
					                    data: data.liste_educateur,
					                    columns: [
					                        { data: 'nom', title: 'Nom' },
					                        { data: 'prenom', title: 'Prenom' },
					                        { data: 'email', title: 'Email' },
					                            {
												title: 'Actions',
												data: null,
												render: function (data, type, row) {
													// Ajouter des icônes d'action pour chaque ligne
													return '<button type="button" class="text-success btn"  title="Voir Détail"  onclick="voir(' + row.numeroLicence + ')"><i class="bx bx-show font-22"></i></button>'
												}
												}
					                    ],
										 language: {
			                // Textes pour la pagination
			                paginate: {
			                  first: 'Premier',
			                  previous: 'Précédent',
			                  next: 'Suivant',
			                  last: 'Dernier'
			                },
			                // Textes pour l'affichage des informations
			                info: 'Affichage de _START_ à _END_ sur _TOTAL_ entrées',
			                // Texte pour le champ de recherche
			                search: 'Rechercher :',
			                // Textes pour la longueur de la page
			                lengthMenu: 'Afficher _MENU_ ',
			                // Texte lorsque la table est vide
			                emptyTable: 'Aucune donnée disponible dans le tableau',
			                // Texte lorsque les données sont en cours de chargement
			                loadingRecords: 'Chargement...',
			                // Texte lorsque la recherche ne trouve aucune correspondance
			                zeroRecords: 'Aucun enregistrement trouvé',
			                // Textes pour la sélection des colonnes
			                select: {
			                  rows: {
			                    _: '%d lignes sélectionnées',
			                    0: 'Aucune ligne sélectionnée',
			                    1: '1 ligne sélectionnée'
			                  }
			                }
			              }
					                });
					            } else {
					                alert(data.message);
					            }
					        },
					        error: function(xhr, status, error) {
					            alert('Erreur AJAX : ' + error);
					        }
					    });
					}
					
					    </script>

	<!-- content -->
	<!-- END page content -->
{% endblock %}
